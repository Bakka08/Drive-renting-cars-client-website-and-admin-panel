<!DOCTYPE html>
<html lang="en">
  <head>
  
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
    <link href="https://fonts.googleapis.com/css?family=Poppins:200,300,400,500,600,700,800&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="css/open-iconic-bootstrap.min.css">
    <link rel="stylesheet" href="css/animate.css">
    
    <link rel="stylesheet" href="css/owl.carousel.min.css">
    <link rel="stylesheet" href="css/owl.theme.default.min.css">
    <link rel="stylesheet" href="css/magnific-popup.css">


    <link rel="stylesheet" href="css/ionicons.min.css">

    <link rel="stylesheet" href="css/bootstrap-datepicker.css">
    <link rel="stylesheet" href="css/jquery.timepicker.css">

    
    <link rel="stylesheet" href="css/flaticon.css">
    <link rel="stylesheet" href="css/icomoon.css">
    <link rel="stylesheet" href="css/style.css">
	
  </head>
  <body>
    <div class="fisrt">
	  <nav class="navbar navbar-expand-lg navbar-dark ftco_navbar bg-dark ftco-navbar-light" id="ftco-navbar">
	    <div class="container">
	      <a class="navbar-brand" href="#">Dri<span>ve</span></a>
	      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#ftco-nav" aria-controls="ftco-nav" aria-expanded="false" aria-label="Toggle navigation">
	        <span class="oi oi-menu"></span> Menu
	      </button>

	      <div class="collapse navbar-collapse" id="ftco-nav">
	        <ul class="navbar-nav ml-auto">
	          
	          
	        </ul>
	      </div>
	    </div>
	  </nav>
    <!-- END nav -->
    
	<div class="hero-wrap ftco-degree-bg" style="background-image: url('images/bg_1.jpg');" data-stellar-background-ratio="0.5" id="section1">
		<div class="overlay"></div>
		<div class="container">
		  <div class="row no-gutters slider-text justify-content-start align-items-center justify-content-center">
			<div class="col-lg-8 ftco-animate">
			  <div class="text w-100 text-center mb-md-5 pb-md-5">
				<h1 class="mb-4">Fast &amp; Easy Way To Rent A Car</h1>
				<p style="font-size: 18px;">Hit the road with confidence and style, and make every mile count with our premium car rental service.</p>
				<a id="login-link" href="#" class="icon-wrap  d-flex align-items-center mt-4 justify-content-center">
				  <div class="icon d-flex align-items-center justify-content-center">
					<span class="ion-ios-play"></span>
				  </div>
				  <div class="heading-title ml-5">
					<span >Login</span>
				  </div>
				</a>
			  </div>
			</div>
		  </div>
		</div>
	  </div>

	  <div class="hero-wrap ftco-degree-bg" style="background-image: url('images/bg_1.jpg');display:none;" data-stellar-background-ratio="0.5" id="section2" >
		<div class="overlay"></div>
		<div class="container">
		  <div class="row no-gutters slider-text justify-content-start align-items-center justify-content-center">
			<div class="col-lg-8 ftco-animate">
			  <div class="text w-100 text-center mb-md-5 pb-md-5">
				<h1 class="mb-4">Fast &amp; Easy Way To Rent A Car</h1>
				<p style="font-size: 18px;">Hit the road with confidence and style, and make every mile count with our premium car rental service.</p>
				<a id="login-link2" href="#" class="icon-wrap  d-flex align-items-center mt-4 justify-content-center">
				  <div  class="icon d-flex align-items-center justify-content-center">
					<span class="ion-ios-play"></span>
				  </div>
				  <div class="heading-title ml-5">
					<span >Logout</span>
				  </div>
				</a>
				
			  </div>
			</div>
		  </div>
		</div>
	  </div>

	  <section class="ftco-section bg-light" id="list" style="display:none;" >
    	
    		
    			
    
    	
		
    </section>
	
	  <section class="ftco-section ftco-no-pt bg-light" style="display:none;" id="selection">
    	<div class="container">
    		<div class="row no-gutters">
    			<div class="col-md-12	featured-top">
    				<div class="row no-gutters">
	  					<div class="col-md-4 d-flex align-items-center">
	  						<div  class="request-form ftco-animate bg-primary">
		          		<h2>Make your trip</h2>
			    				<div class="form-group">
			    					<label for="" class="label">Pick-up location</label>
			    					<input type="text" class="form-control" placeholder="City" id="city1">
			    				</div>
			    				<div class="form-group">
			    					<label for="" class="label">Drop-off location</label>
			    					<input type="text" class="form-control" placeholder="City" id="city2">
			    				</div>
			    				<div class="d-flex">
			    					<div class="form-group mr-2">
			                <label for="" class="label">Pick-up date</label>
			                <input type="text" class="form-control" id="book_pick_date" placeholder="Date" >
			              </div>
			              <div class="form-group ml-2">
			                <label for="" class="label">Drop-off date</label>
			                <input type="text" class="form-control" id="book_off_date" placeholder="Date" ">
			              </div>
		              </div>
		              <div class="form-group">
		                <label for="" class="label">Pick-up time</label>
		                <input type="text" class="form-control" id="time_pick" placeholder="Time" ">
		              </div>
			            <div class="form-group">
			              <button onclick="search()" class="btn btn-secondary py-3 px-4">Rent A Car Now</button>
			            </div>
					</div>
	  					</div>
	  					<div class="col-md-8 d-flex align-items-center">
	  						<div class="services-wrap rounded-right w-100">
	  							<h3 class="heading-section mb-4">Better Way to Rent Your Perfect Cars</h3>
	  							<div class="row d-flex mb-4">
					          <div class="col-md-4 d-flex align-self-stretch ftco-animate">
					            <div class="services w-100 text-center">
				              	<div class="icon d-flex align-items-center justify-content-center"><span class="flaticon-route"></span></div>
				              	<div class="text w-100">
					                <h3 class="heading mb-2">Choose Your Pickup Location</h3>
				                </div>
					            </div>      
					          </div>
					          <div class="col-md-4 d-flex align-self-stretch ftco-animate">
					            <div class="services w-100 text-center">
				              	<div class="icon d-flex align-items-center justify-content-center"><span class="flaticon-handshake"></span></div>
				              	<div class="text w-100">
					                <h3 class="heading mb-2">Select the Best Deal</h3>
					              </div>
					            </div>      
					          </div>
					          <div class="col-md-4 d-flex align-self-stretch ftco-animate">
					            <div class="services w-100 text-center">
				              	<div class="icon d-flex align-items-center justify-content-center"><span class="flaticon-rent"></span></div>
				              	<div class="text w-100">
					                <h3 class="heading mb-2">Reserve Your Rental Car</h3>
					              </div>
					            </div>      
					          </div>
					        </div>
					        <p><a href="#" class="btn btn-primary py-3 px-4">Reserve Your Perfect Car</a></p>
	  						</div>
	  					</div>
	  				</div>
				</div>
  		</div>
    </section>

    <section class="ftco-section ftco-about" id="about">
			<div class="container">
				<div class="row no-gutters">
					<div class="col-md-6 p-md-5 img img-2 d-flex justify-content-center align-items-center" style="background-image: url(images/about.jpg);">
					</div>
					<div class="col-md-6 wrap-about ftco-animate">
	          <div class="heading-section heading-section-white pl-md-5">
	          	<span class="subheading">About us</span>
	            <h2 class="mb-4">Welcome to Drive</h2>

	            <p>At our car rental service, we offer you the convenience and flexibility of renting a car whenever and wherever you need it. Whether you are traveling for business or pleasure, our wide selection of cars, SUVs, and trucks is sure to meet your needs and budget.</p>
	            <p>Our mission is to provide you with a hassle-free car rental experience from start to finish. Our team of friendly and knowledgeable professionals is dedicated to making your rental experience easy and enjoyable. From helping you choose the right vehicle to offering flexible rental options and competitive pricing, we are committed to exceeding your expectations.</p>
              <p>With our online booking system, you can reserve your rental car in just a few clicks. And with our convenient pick-up and drop-off locations, you can get on the road quickly and easily.

                Thank you for choosing our car rental service. We look forward to helping you with all of your rental needs.</p>

	            
	          </div>
					</div>
				</div>
			</div>
		</section>

    <section class="ftco-counter ftco-section img bg-light" id="section-counter">
			<div class="overlay"></div>
    	<div class="container">
    		<div class="row">
          <div class="col-md-6 col-lg-3 justify-content-center counter-wrap ftco-animate">
            <div class="block-18">
              <div class="text text-border d-flex align-items-center">
                <strong class="number" data-number="60">0</strong>
                <span>Year <br>Experienced</span>
              </div>
            </div>
          </div>
          <div class="col-md-6 col-lg-3 justify-content-center counter-wrap ftco-animate">
            <div class="block-18">
              <div class="text text-border d-flex align-items-center">
                <strong class="number" data-number="1090">0</strong>
                <span>Total <br>Cars</span>
              </div>
            </div>
          </div>
          <div class="col-md-6 col-lg-3 justify-content-center counter-wrap ftco-animate">
            <div class="block-18">
              <div class="text text-border d-flex align-items-center">
                <strong class="number" data-number="2590">0</strong>
                <span>Happy <br>Customers</span>
              </div>
            </div>
          </div>
          <div class="col-md-6 col-lg-3 justify-content-center counter-wrap ftco-animate">
            <div class="block-18">
              <div class="text d-flex align-items-center">
                <strong class="number" data-number="67">0</strong>
                <span>Total <br>Branches</span>
              </div>
            </div>
          </div>
        </div>
    	</div>
    </section>
	<footer class="ftco-footer ftco-bg-dark ftco-section" style="background-color: #303841;">
		<div class="container">
  
		  <div class="row">
			<div class="col-md-12 text-center">
  
			  <p>Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved </p>
			</div>
		  </div>
		</div>
	  </footer>	
</div>
	    <!-- login -->
		<div class="intro-body" id="login" style="display:none;" >
		<div class="hero-wrap ftco-degree-bg" style="background-image: url('images/bg_1.jpg');" data-stellar-background-ratio="0.5">
			<div class="overlay"></div>
			<div class="container">
			  <div class="row no-gutters slider-text justify-content-start align-items-center justify-content-center">
				<div class="col-lg-8 ftco-animate">
				  <div class="text w-100 text-center mb-md-5 pb-md-5">
						<div class="container">
			<div class="row">
				<div class="col-lg-8 mx-auto">
					<p class="intro-text"></p>
					<div id="main" style="background-image: none;">
							<h3 class="text-center">WELCOME</h3>
								<div class="mb-3"><label class="form-label" id="lbl-usuario" for="txt-usuario" style="color: white;">Email</label>
									<input class="form-control" type="email" id="email1" name="email1" style="font-style: italic;"></div>
								<div class="mb-3"><label class="form-label" id="lbl-password" for="txt-password" style="color: white;">Password</label>
									<input class="form-control" type="password" id="password1" style="font-style: italic;"></div>
							<button class="btn btn-primary" id="login-btn"  style="background-color:  #01d38f;border-color: var(--bs-btn-color);border-radius: 15px;" ">LOG IN</button>
							<p></p>
							<p  style="font-style: italic; color: white;">You Don't have account ?&nbsp;<a id="tosignup" href="#" style="color:#01d38f;font-size: 19px; font-weight: bold;">Sign up</a></p>
						</div>
					</div>
				</div>
			</div>
		</div>
				  </div>
				</div>
			  </div>
			</div>
		  </div>
	

	
	</div>

		<!-- signup -->
		
	<div class="intro-body" id="signup"  style="display:none;">
		<div class="hero-wrap ftco-degree-bg" style="background-image: url('images/bg_1.jpg');" data-stellar-background-ratio="0.5">
			<div class="overlay"></div>
			<div class="container">
			  <div class="row no-gutters slider-text justify-content-start align-items-center justify-content-center">
				<div class="col-lg-8 ftco-animate">
				  <div class="text w-100 text-center mb-md-5 pb-md-5">
						<div class="container">
			<div class="row">
				<div class="col-lg-8 mx-auto">
					<p class="intro-text"></p>
					<div id="main" style="background-image: none;">
							<h3 class="text-center">Register</h3>
						
								<div class="mb-3"><label class="form-label" id="lbl-usuario" for="txt-usuario"style="color: white;">First Name</label><input class="form-control" type="text" id="fnamee" style="font-style: italic; "></div>
								<div class="mb-3"><label class="form-label" id="lbl-usuario-3" for="txt-usuario"style="color: white;">Last Name</label><input class="form-control" type="text" id="lnamee" style="font-style: italic;"></div>
								<div class="mb-3"><label class="form-label" id="lbl-usuario-2" for="txt-usuario"style="color: white;">Email</label><input class="form-control" type="text" id="emaile" style="font-style: italic;"></div>
								<div class="mb-3"><label class="form-label" id="lbl-usuario-1" for="txt-usuario"style="color: white;">Telephone</label><input class="form-control" type="text" id="telephonee" style="font-style: italic;"></div>
								<div class="mb-3"><label class="form-label" id="lbl-password" for="txt-password"style="color: white;">Password</label><input class="form-control" type="password" id="password1e" style="font-style: italic;"></div>
								<div class="mb-3"><label class="form-label" id="lbl-password-1" for="txt-password"style="color: white;">Confirm Password</label><input class="form-control" type="password" id="password2e" style="font-style: italic;"></div>
							<button class="btn btn-primary" id="btn-sesion" style="color:  #01d38f;--bs-primary-rgb: 37,109,180;background: #01d38f;border-color: var(--bs-btn-color);border-radius: 15px;" onclick="createUser()">Sign up&nbsp;</button>
							<p></p>
							<p  style="font-style: italic;color: white;">You already have account &nbsp;?&nbsp;<a id="tologin" href="#" style="color: #01d38f;font-size: 19px;font-weight: bold;">Login</a></p>
						</div>
					</div>
				</div>
			</div>
		</div>
				  </div>
				</div>
			  </div>
			</div>
		  </div>
	
	
	</div>



    
  


  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="js/jquery.min.js"></script>
  <script src="js/jquery-migrate-3.0.1.min.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <script src="js/jquery.easing.1.3.js"></script>
  <script src="js/jquery.waypoints.min.js"></script>
  <script src="js/jquery.stellar.min.js"></script>
  <script src="js/owl.carousel.min.js"></script>
  <script src="js/jquery.magnific-popup.min.js"></script>
  <script src="js/aos.js"></script>
  <script src="js/jquery.animateNumber.min.js"></script>
  <script src="js/bootstrap-datepicker.js"></script>
  <script src="js/jquery.timepicker.min.js"></script>
  <script src="js/scrollax.min.js"></script>
  <script src="js/main.js"></script>


  <script>
	 let searchData;
	  let apiData;

	const loginLink = document.getElementById('login-link');
	const loginLink2 = document.getElementById('login-link2');
	const tosignup = document.getElementById('tosignup');
	const tologin = document.getElementById('tologin');
	const herowrap= document.querySelector('.hero-wrap');
	const navbar= document.querySelector('.navbar ');
	const section= document.querySelector('.ftco-section ');
	const counter= document.querySelector('.ftco-counter ');
	const fotter= document.querySelector('.ftco-footer ');
	const about = document.getElementById('about');
	const login = document.getElementById('login');
	const signup = document.getElementById('signup');
	const section1 = document.getElementById('section1');
	const section2 = document.getElementById('section2');
	const selection = document.getElementById('selection')
	const list = document.getElementById("list");
	loginLink.addEventListener('click', (event) => {
	  event.preventDefault();
	  herowrap.style.display = 'none';
	  section.style.display = 'none';
	  counter.style.display = 'none';
	  fotter.style.display = 'none';
	  about.style.display ='none';
	  login.style.display = 'block';
	  signup.style.display = 'none';
	  section1.style.display = 'none';
	  section2.style.display = 'none';
	  list.style.display = 'none';
	});

	loginLink2.addEventListener('click', (event) => {
	  event.preventDefault();
	  herowrap.style.display = 'none';
	  section.style.display = 'none';
	  counter.style.display = 'none';
	  fotter.style.display = 'none';
	  about.style.display ='none';
	  login.style.display = 'block';
	  signup.style.display = 'none';
	  section1.style.display = 'none';
	  section2.style.display = 'none';
	  selection.style.display = 'none';
	  list.style.display = 'none';
	});

	tosignup.addEventListener('click', (event) => {
	  event.preventDefault();
	  herowrap.style.display = 'none';
	  section.style.display = 'none';
	  counter.style.display = 'none';
	  fotter.style.display = 'none';
	  login.style.display = 'none';
	  signup.style.display = 'block';
	  section2.style.display = 'none';
	  list.style.display = 'none';
	});

	
	tologin.addEventListener('click', (event) => {
	  event.preventDefault();
	  herowrap.style.display = 'none';
	  section.style.display = 'none';
	  counter.style.display = 'none';
	  fotter.style.display = 'none';
	  login.style.display = 'block';
	  signup.style.display = 'none';
	  section2.style.display = 'none'
	  list.style.display = 'none';
	});



const emailInput = document.getElementById('email1');
const passwordInput = document.getElementById('password1');


const loginButton = document.getElementById('login-btn');


loginButton.addEventListener('click', async () => {
 
  const email = emailInput.value;
  const password = passwordInput.value;

  if (emailInput.value.trim() === '' || passwordInput.value.trim() === '') {
    alert('Email and password are required.');
    return;
  }
 
  const response = await fetch(`http://localhost:8000/login/?email=${email}&password=${password}`);

  
  const userData = await response.json();

  if (response.status === 404) {
    console.log('User not found.');
    return;
  }

 
  if (userData.is_admin) {
    console.log('User is an admin!');
    
  } else {
	document.getElementById("password1").value = "";
	document.getElementById("email1").value = "";
	herowrap.style.display = 'block';
	section.style.display = 'none';
	counter.style.display = 'block';
	fotter.style.display = 'block';
	about.style.display ='block';
	login.style.display = 'none';
	signup.style.display = 'none';
	section1.style.display = 'none';
	section2.style.display = 'block';
	selection.style.display = 'block';
	list.style.display = 'none';
  }
});

function createUser() {
        // retrieve input values
        const fname = document.getElementById('fnamee').value;
        const lname = document.getElementById('lnamee').value;
        const email = document.getElementById('emaile').value;
        const telephone = document.getElementById('telephonee').value;
        const password1 = document.getElementById('password1e').value;
        const password2 = document.getElementById('password2e').value;

        // validate input values
        if (!fname || !lname || !email || !telephone || !password1|| !password2) {
          alert('Please fill in all fields.');
          return;
        }
		if (password1 !== password2) {
    		alert('Passwords do not match.');
    		return;
  }

        // send data to API
        fetch('http://localhost:8000/signup/', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({
            fname: fname,
            lname: lname,
            email: email,
            telephone: telephone,
            password: password1,
            is_admin: false
          })
        })
        .then(response => {
          if (response.ok) {
			herowrap.style.display = 'none';
				section.style.display = 'none';
				counter.style.display = 'none';
				fotter.style.display = 'none';
				login.style.display = 'block';
				signup.style.display = 'none';
				section2.style.display = 'none'
				list.style.display = 'none';
          } else {
            alert('Failed to create user.');
          }
        })
        .catch(error => {
          console.error(error);
          alert('An error occurred while creating the user.');
        });
      }


	 

function search() {
  // Read input values
  const city1 = document.getElementById("city1").value;
  const city2 = document.getElementById("city2").value;
  const date1 = formatDate(document.getElementById("book_pick_date").value);
  const date2 = formatDate(document.getElementById("book_off_date").value);
  const time = document.getElementById("time_pick").value;

  // Check that all input values are not empty
  if (!city1 || !city2 || !date1 || !date2 || !time) {
    alert("Please fill in all required fields.");
    return;
  }

  // Check that date1 is not later than date2
  if (new Date(date1) > new Date(date2)) {
    alert("Pick-up date must be before drop-off date.");
    return;
  }

  // Construct API endpoint URL
  const url = `http://localhost:8000/search/?date1=${date1}&date2=${date2}`;

  // Send GET request to API endpoint
  fetch(url)
    .then(response => response.json())
    .then(data => {
      
      searchData = {
        city1: city1,
        city2: city2,
        date1: date1,
        date2: date2,
        time: time,
      };
	  apiData = data.cars.map(car => Object.values(car)); // transform cars objects to an array with each car as a line

	 

	herowrap.style.display = 'block';
	section.style.display = 'none';
	counter.style.display = 'none';
	fotter.style.display = 'block';
	about.style.display ='none';
	login.style.display = 'none';
	signup.style.display = 'none';
	section1.style.display = 'none';
	section2.style.display = 'block';
	selection.style.display = 'none';
	list.style.display = 'block';
	displayCars(apiData);
    })
    .catch(error => {
      // Handle error
      console.error(error);
    });
	
}


function formatDate(dateString) {
  // Parse input date string to Date object
  const date = new Date(dateString);

  // Format date in yyyy-mm-dd format
  const year = date.getFullYear();
  const month = padZeroes(date.getMonth() + 1, 2);
  const day = padZeroes(date.getDate(), 2);
  return `${year}-${month}-${day}`;
}

function padZeroes(number, length) {
  // Helper function to pad zeroes to a number
  return number.toString().padStart(length, "0");
}

function generateCarHTML(car) {
	console.log(car)
  return `
    <div style="width: 33.33%; float: left; padding: 10px;">
      <div style="background-color: #fff; border-radius: 10px; box-shadow: 0 3px 20px rgba(0,0,0,0.2);">
        <div style="height: 200px; background-size: cover; background-position: center; border-radius: 10px 10px 0 0; background-image: url(${car[3]});">
        </div>
        <div style="padding: 20px;">
          <h2 style="margin: 0; font-size: 24px;">${car[2]}</h2>
          <span style="color: black;">${car[1]}</span>
          <div style="margin: 10px 0;">
            <p class="price" style="margin: 0; color: #188cfc;">$${car[9]} <span style="color: black;">/day</span></p>
            <p class="price" style="margin: 0; color: #188cfc;">$${car[0]*10} <span style="color: black;">/Your trip </span></p>
          </div>
          <p style="margin: 0;"><a href="#" style="display: inline-block; padding: 10px 20px; background-color: #007bff; color: #fff; border-radius: 5px; text-decoration: none; transition: background-color 0.3s ease;">Book now</a> <a href="car-single.html" style="display: inline-block; padding: 10px 20px; background-color: #fff; color: #007bff; border-radius: 5px; border: 1px solid #007bff; text-decoration: none; transition: background-color 0.3s ease;">Details</a></p>
        </div>
      </div>
    </div>
  `;
}

 
function displayCars(data) {
  if (!data) {
    return;
  }
  const carContainer = document.getElementById("list");
  let carHTML = '<div class="container" >';
	carHTML += '<div class="row">';
  for (let i = 0; i < data.length; i++) {
    carHTML += generateCarHTML(data[i]);
  }
  carHTML += '</div>';
  carHTML += '</div>';
  console.log(carHTML)
  carContainer.innerHTML = carHTML;
}




  </script>



  </body>
</html>